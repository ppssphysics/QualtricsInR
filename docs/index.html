<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wrapper for Qualtrics v3 API references â€¢ QualtricsInR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Wrapper for Qualtrics v3 API references">
<meta property="og:description" content="The QualtricsInR package is an exhaustive wrapper for the v3 API references.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">QualtricsInR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<div id="qualtricsinr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#qualtricsinr" class="anchor"></a>QualtricsInR</h1></div>
<p>The QualtricsInR package provides a general wraper for the Qualtrics v3 API references. The package is built accross the main API calls to manipulate survey objects and responses.</p>
<p>The package was created in order to address the need of large scale surveys at the World Economic Forum where the use of the API allowed the automate many time consuming processes and ensure robust execution processes.</p>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#authentication">Authenticatication</a></li>
<li><a href="#retrieving-survey-responses">Retrieving Survey Responses</a></li>
<li><a href="#manipulating-survey-objects">Manipulating Survey Objects</a></li>
<li><a href="#brand-sdministration">Brand Administration</a></li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install QualtricsInR from github using the devtools package. However, since the package is hosted on a private GitHub repository, you will need to use an authentication key (ask <a href="mailto:pierre.saouter@weforum.org">pierre.saouter@weforum.org</a> for a key).</p>
<p>The package will eventually become public.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">'ppssphysics/QualtricsInR'</span>, <span class="dt">auth_token=</span><span class="st">'key'</span>)</code></pre></div>
</div>
<div id="authentication" class="section level2">
<h2 class="hasAnchor">
<a href="#authentication" class="anchor"></a>Authentication</h2>
<p>Two ways are provided to set-up your Qualtrics credentials:</p>
<ol>
<li>Using a plain Token</li>
<li>Using the OAuth 2.0</li>
</ol>
<p>Both are valid methods. All information on how to retrieve identification parameters and generete tokens from your Qualtrics account can be found <a href="https://api.qualtrics.com/v3/docs/api-general-instructions">here</a>.</p>
<div id="setting-a-plain-text-api-token" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-a-plain-text-api-token" class="anchor"></a>Setting a plain text API Token</h3>
<p>You can set options for user authentication in your Qualtrics account by generating a new API token. You will also need your data center id. You can then set your authentication credentials with <code>set_qualtrics_opts</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/oauth.html">set_qualtrics_opts</a></span>(<span class="dt">api_token =</span> <span class="st">"xXxxX0X0x"</span>, <span class="dt">data_center_id =</span> <span class="st">"my.center"</span>)</code></pre></div>
<p>If you use this methods, you will have set your credentials for every new session.</p>
</div>
<div id="setting-up-an-oauth-client-manager" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-up-an-oauth-client-manager" class="anchor"></a>Setting-up an OAuth Client Manager</h3>
<p>To generate an OAuth application, follow the steps below in your Qualtrics account:</p>
<ol>
<li>Go to Account Settings</li>
<li>Create an OAuth application</li>
<li>Use the client id, client secret, and data center id in <code>qualtrics_auth</code>, as below.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/oauth.html">qualtrics_auth</a></span>(<span class="dt">id =</span> <span class="st">"xXxxX0X0x"</span>, <span class="dt">secret =</span> <span class="st">"xXxxX0X0x"</span>, <span class="dt">data_center =</span> <span class="st">"my.center"</span>)</code></pre></div>
<p>This will authenticate you, returning a bearer token valid for an hour, saving the <em>encrypted</em> credentials in a <code>.qualtrics-oauth</code> file, which will be automatically loaded in all subsequent sessions and automatically refreshed if need be. You should therefore only find the need to run <code>qualtrics_auth</code> once.</p>
</div>
</div>
<div id="retrieving-survey-responses" class="section level2">
<h2 class="hasAnchor">
<a href="#retrieving-survey-responses" class="anchor"></a>Retrieving Survey Responses</h2>
<p>The package offers the possiblity to retrieve survey responses. However, the API does not allow to fetch the data directly but requieres to send a export creation request to download the data (more information can be found <a href="https://api.qualtrics.com/docs/getting-survey-responses-new">here</a>). QualtricsInR automates running through the various steps.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># export survey as json file</span>
<span class="kw"><a href="reference/get_survey_responses.html">get_survey_responses</a></span>(surveyId)
<span class="co"># export survey as csv file (can also be tsv) and save in local directory ./Data/</span>
<span class="kw"><a href="reference/get_survey_responses.html">get_survey_responses</a></span>(surveyId, <span class="dt">format=</span><span class="st">"csv"</span>, <span class="dt">saveDir=</span><span class="st">"./Data"</span>)</code></pre></div>
<p>Internally, when using <code>get_survey_responses</code>, QualtricsInR has 1) request the data from Qualtrics, 2) wait while the data is being prepared, 3) download the data. It may therefore be more efficient, if downloading responses from multiple surveys to 1) request the downloads 2) then download the prepared files.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get multiple survey at once.</span>
ids &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)

<span class="co"># request downloads</span>
requests &lt;-<span class="st"> </span><span class="kw"><a href="reference/bulk-download.html">request_downloads</a></span>(ids)

<span class="co"># Which request was successful?</span>
is_it &lt;-<span class="st"> </span><span class="kw"><a href="reference/is_success.html">is_success</a></span>(requests, <span class="ot">TRUE</span>)

<span class="co"># download data</span>
data &lt;-<span class="st"> </span><span class="kw"><a href="reference/bulk-download.html">download_requested</a></span>(requests)</code></pre></div>
<p>By default, the above queries return the full export of responses. There is however a limit of 1.8GB for exports after which you will need to split your exports using the availble options.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ask an export for all responses after April 1st, 2016 and before April 25 2016</span>
<span class="kw"><a href="reference/get_survey_responses.html">get_survey_responses</a></span>(surveyId, <span class="dt">startDate=</span><span class="st">"2016-04-01T07:31:43Z"</span>, <span class="dt">endDate=</span><span class="st">"2016-04-25T07:31:43Z"</span>)</code></pre></div>
<p>where the dates specifications followm the ISO 8601 standard YYYY-MM-DD (more information <a href="https://api.qualtrics.com/docs/dates-and-times">here</a>). There are many more options you can set to retrieve your data. All options xan be found in the corresponding <a href="https://api.qualtrics.com/reference/create-response-export-new">API reference page</a>.</p>
</div>
<div id="manipulating-survey-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#manipulating-survey-objects" class="anchor"></a>Manipulating Survey Objects</h2>
<p>Using the Qualtrics API, you can peform a number of manipulations of survey objects in your Qualtrics account. You can check all available actions at the Qualtrics API reference webpage <a href="https://api.qualtrics.com/reference/get-brand-info">here</a>. We provide below a brief descriptions of a non exhaustive list of actions available in the package for the manipulation of surveys:</p>
<ul>
<li>List surveys</li>
<li>Retrieving a survey</li>
<li>Updating a survey</li>
<li>Deleting a survey</li>
<li>Importing a survey</li>
<li>Copying a survey within an account and to other accounts</li>
<li>Sharing a survey with other accounts</li>
</ul>
<div id="listing-surveys-in-account" class="section level3">
<h3 class="hasAnchor">
<a href="#listing-surveys-in-account" class="anchor"></a>Listing surveys in Account</h3>
<p>You can easily retrieve the full list of surveys available in your account:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my_surveys &lt;-<span class="st"> </span><span class="kw"><a href="reference/list_surveys.html">list_surveys</a></span>()</code></pre></div>
<p>This allows you to easily search for the survey_id of the survey of interest in order to interact with the object remotely.</p>
<p>For example, you can copy a survey within your account or to another account:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Copy a survey in your own account</span>
<span class="kw"><a href="reference/copy_survey.html">copy_survey</a></span>(my_surveys[<span class="dv">1</span>], <span class="st">"New_Copy"</span>)
<span class="co"># Copy a survey to another user's account</span>
<span class="kw"><a href="reference/copy_survey.html">copy_survey</a></span>(my_surveys[<span class="dv">1</span>], <span class="st">"New_Copy"</span>,user_id)</code></pre></div>
<p>You might not want to copy a survey into another personâ€™s account but would rather share the project defining a specific set of permissions. By default, without any specification, your project will be shared with all permissions disabled. You can easily decide which permissions to enable by providing an array of numbers indicating the permissions you want to enable. The available options are listed below:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="st">"1"</span>=<span class="st">"copySurveyQuestions"</span>
<span class="st">"2"</span>=<span class="st">"editSurveyFlow"</span>
<span class="st">"3"</span>=<span class="st">"useBlocks"</span>
<span class="st">"4"</span>=<span class="st">"useSkipLogic"</span>
<span class="st">"5"</span>=<span class="st">"useConjoint"</span>
<span class="st">"6"</span>=<span class="st">"useTriggers"</span>
<span class="st">"7"</span>=<span class="st">"useQuotas"</span>
<span class="st">"8"</span>=<span class="st">"setSurveyOptions"</span>
<span class="st">"9"</span>=<span class="st">"editQuestions"</span>
<span class="st">"10"</span>=<span class="st">"deleteSurveyQuestions"</span>
<span class="st">"11"</span>=<span class="st">"editSurveys"</span>
<span class="st">"12"</span>=<span class="st">"activateSurveys"</span>
<span class="st">"13"</span>=<span class="st">"deactivateSurveys"</span>
<span class="st">"14"</span>=<span class="st">"copySurveys"</span>
<span class="st">"15"</span>=<span class="st">"distributeSurveys"</span>
<span class="st">"16"</span>=<span class="st">"deleteSurveys"</span>
<span class="st">"17"</span>=<span class="st">"translateSurveys"</span>
<span class="st">"18"</span>=<span class="st">"editSurveyResponses"</span>
<span class="st">"19"</span>=<span class="st">"createResponseSets"</span>
<span class="st">"20"</span>=<span class="st">"viewResponseId"</span>
<span class="st">"21"</span>=<span class="st">"useCrossTabs"</span>
<span class="st">"22"</span>=<span class="st">"downloadSurveyResults"</span>
<span class="st">"23"</span>=<span class="st">"viewSurveyResults"</span>
<span class="st">"24"</span>=<span class="st">"filterSurveyResults"</span>
<span class="st">"25"</span>=<span class="st">"viewPersonalData"</span></code></pre></div>
<p>For example, to share the survey with only distribution rights enabled, you could use the following call:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/share_survey.html">share_survey</a></span>(my_surveys[<span class="dv">1</span>], user_id, <span class="dv">15</span>)</code></pre></div>
<p>Previous calls are overridden by any new permissions setting so you must make sure to set every permission each time. To add permissions to visualize the data, do:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/share_survey.html">share_survey</a></span>(my_surveys[<span class="dv">1</span>], user_id, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">15</span>,<span class="dv">23</span>))</code></pre></div>
<p>If you want to remove the permission to visualize data but keep the distribution right:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/share_survey.html">share_survey</a></span>(my_surveys[<span class="dv">1</span>], user_id, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">15</span>))</code></pre></div>
</div>
</div>
<div id="brand-administration" class="section level2">
<h2 class="hasAnchor">
<a href="#brand-administration" class="anchor"></a>Brand Administration</h2>
<p>If you are a brand administrator, you can leverage the Qualtrics API to manage your organizationâ€™s Qualtricsâ€™ account. This can be extremely useful for creating, setting and updating user permissions. You can only use the functions described below if you possess brand adminstrator permissions.</p>
<p>A non-exhaustive list of actions you can automate are:</p>
<ul>
<li>Get overall information about your Qualtricsâ€™ organizations account</li>
<li>Manage groups</li>
<li>Manage users</li>
</ul>
<p>For example, retrieve all users and their account information using the simple function below. If you have a large organization with thousands of accounts, this query can take time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/list_users.html">list_users</a></span>()</code></pre></div>
<p>In the context of the recent GDPR regulation, one important set of functions provided by the Qualtrics API are the data privacy functions. You can:</p>
<ul>
<li>Create an erasing request (will erase all data matching an email)</li>
<li>List your erasing requests</li>
<li>Retrieve a given erasing request</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Pierre Souter <br><small class="roles"> Maintainer, author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  </div>
</div>

      <footer><div class="copyright">
  <p>Developed by Pierre Souter.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
